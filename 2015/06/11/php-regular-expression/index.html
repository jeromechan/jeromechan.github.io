<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      PHP正则表达式 &middot; Jerome Chan
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/poole.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-precomposed.png">
                                 <link rel="shortcut icon" href="/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-08 layout-reverse">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Jerome Chan
        </a>
      </h1>
      <p class="lead">Hello, I&acutem a web developer at Tuniu Corp. Follow my <a href='https://github.com/jeromechan' target='_blank'>GitHub</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>
<!-- 
      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About Me</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/pages/bibliography.html">读过的书目</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/categories/">Categories</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/slides/">Slides</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/tags/">Tags</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/timeline/">Timeline</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
       -->

      <a class="sidebar-nav-item" href="/about/">About Me</a>
      <a class="sidebar-nav-item" href="/bibliography/" target="_blank">Bibliography</a>
      <a class="sidebar-nav-item" href="/slides/">Slides</a>
      <a class="sidebar-nav-item" href="/tags/">Tags</a>
      <a class="sidebar-nav-item" href="/categories/">Category</a>
      <a class="sidebar-nav-item" href="/timeline/">Timeline</a>
      <!-- <a class="sidebar-nav-item" href="https://github.com/jeromechan">GitHub</a> -->
      <!-- <span class="sidebar-nav-item">Currently v2.1.0-u-jeromechan-01</span> -->
    </nav>

    <p><small>Copyright &copy; 2013-2016</small></p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">PHP正则表达式</h1>
  <span class="post-date">11 Jun 2015</span>
  <p><strong>一、介绍</strong></p>

<p>正则表达式，大家在开发中应该是经常用到，现在很多开发语言都有正则表达式的应用，比如javascript，java，.net,php等等，我今天就把我对正则表达式的理解跟大家唠唠，不当之处，请多多指教！</p>

<p>需要知道的术语——下面的术语你知道多少?</p>

<p>Δ  定界符<br />
Δ  字符域<br />
Δ  修饰符<br />
Δ  限定符<br />
Δ  脱字符<br />
Δ  通配符(正向预查，反向预查)<br />
Δ  反向引用<br />
Δ  惰性匹配<br />
Δ  注释<br />
Δ  零字符宽</p>

<ul>
  <li>
    <p>定位<br />
我们什么时候使用正则表达式呢？不是所有的字符操作都用正则就好了，php在某些方面用正则反而影响效率。当我们遇到复杂文本数据的解析时候，用正则是比较好的选择。</p>
  </li>
  <li>
    <p>优点
正则表达式在处理复杂字符操作的时候，可以提高工作效率，也在一定程度节省你的代码量。</p>
  </li>
  <li>
    <p>缺点
我们在使用正则表达式的时候，复杂的正则表达式会加大代码的复杂度，让人很难理解。所以我们有的时候需要在正则表达式内部添加注释。</p>
  </li>
</ul>

<p><strong>二、通用模式</strong></p>

<p>¤ 定界符<br />
通常使用 “/”做为定界符开始和结束,也可以使用”#”。<br />
什么时候使用”#”呢?一般是在你的字符串中有很多”/”字符的时候，因为正则的时候这种字符需要转义，比如uri。</p>

<p>使用”/”定界符的代码如下.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/^http:\/\/([\w.]+)\/([\w]+)\/([\w]+)\.html$/i';
$str = 'http://www.youku.com/show_page/id_ABCDEFG.html';
$matches = array();
if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
</code></pre>
</div>

<p>preg_match中的$matches[0]将包含与整个模式匹配的字符串。<br />
使用”#”定界符的代码如下.这个时候对”/”就不转义!</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '#^http://([\w.]+)/([\w]+)/([\w]+)\.html$#i';
$str = 'http://www.youku.com/show_page/id_ABCDEFG.html';
$matches = array();
if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
</code></pre>
</div>

<p>¤ 修饰符:用于改变正则表达式的行为。</p>

<p>我们看到的<code class="highlighter-rouge">('/^http:\/\/([\w.]+)\/([\w]+)\/([\w]+)\.html/**i**')</code>  中的最后一个”i”就是修饰符,表示忽略大小写，还有一个我们经常用到的是”x”表示忽略空格。<br />
贡献代码:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/HELLO/';
$str = 'hello word';
$matches = array();
if(preg_match($regex, $str, $matches)){
echo 'No i:Valid Successful!',"\n";
}
if(preg_match($regex.'i', $str, $matches)){
echo 'YES i:Valid Successful!',"\n";
}
</code></pre>
</div>

<p>¤ 字符域:[\w]用方括号扩起来的部分就是字符域。<br />
¤ 限定符:如[\w]{3,5}或者[\w]*或者[\w]+这些[\w]后面的符号都表示限定符。现介绍具体意义。</p>

<p>{3,5}表示3到5个字符。{3,}超过3个字符，{,5}最多5个，{3}三个字符。<br />
* 表示0到多个<br />
+ 表示1到多个<br />
¤ 脱字符号（^:）<br />
（1）放在字符域(如:[^\w])中表示否定(不包括的意思)——“反向选择”<br />
（2）放在表达式之前，表示以当前这个字符开始。(/^n/i,表示以n开头)<br />
注意，我们经常管”"叫”跳脱字符”。用于转义一些特殊符号，如”.”,”/”</p>

<p><strong>三、通配符(lookarounds)</strong></p>

<p>断言某些字符串中某些字符的存在与否!<br />
格式:<br />
正向预查:(?=) 相对应的 (?!)表示否定意思<br />
反向预查:(?&lt;=) 相对应的 (?前后紧跟字符</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/(?&lt;=c)d(?=e)/';  /* d 前面紧跟c, d 后面紧跟e*/
$str = 'abcdefgk';
$matches = array();
if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
</code></pre>
</div>

<p>否定意义:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/(?
$str = 'abcdefgk';
$matches = array();
if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
</code></pre>
</div>

<p>字符宽度:零<br />
验证零字符代码</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/HE(?=L)LO/i';
$str = 'HELLO';
$matches = array();

if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
打印不出结果！

$regex = '/HE(?=L)LLO/i';
$str = 'HELLO';
$matches = array();

if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
</code></pre>
</div>

<p>能打印出结果!</p>

<p>说明:(?=L)意思是HE后面紧跟一个L字符。但是(?=L)本身不占字符，要与(L)区分，（L）本身占一个字符。</p>

<p>**四、捕获数据
**</p>

<p>没有指明类型而进行的分组,将会被获取,供以后使用。</p>

<blockquote>
  <p>指明类型指的是通配符。所以只有圆括号起始位置没有问号的才能被捕捉。
在同一个表达式内的引用叫做反向引用。
调用格式: \编号(如\1)。</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/^(Chuanshanjia)[\w\s!]+\1$/';
$str = 'Chuanshanjia thank Chuanshanjia';
$matches = array();

if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
</code></pre>
</div>

<blockquote>
  <p>避免捕获数据</p>
</blockquote>

<p>格式:(?:pattern)</p>

<p>优点:将使有效反向引用数量保持在最小，代码更加、清楚。</p>

<blockquote>
  <p>命名捕获组</p>
</blockquote>

<p>格式:(?P<组名>) 调用方式 (?P=组名)</组名></p>

<div class="highlighter-rouge"><pre class="highlight"><code>arrray(3) {

[0] =&gt;
string(28) “chuanshanjia Is chuanshanjia”
[“author”] =&gt;
string(12) “chuanshanjia”
[1] =&gt;
string(12) “chuanshanjia"
}
</code></pre>
</div>

<p><strong>五、惰性匹配</strong></p>

<p>(记住：会进行两部操作,请看下面的原理部分)
格式:限定符?
原理:”?”：如果前面有限定符，会使用最小的数据。如“*”会取0个，而“+”会取1个，如过是{3,5}会取3个。
先看下面的两个代码:
代码1</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/heL*/i';
$str = 'heLLLLLLLLLLLLLLLL';
if(preg_match($regex, $str, $matches)){
var_dump($matches);
}

echo "\n";
结果1:
array(1) {
[0] =&gt;
string(8) "heLLLLLLLLLLLLLLLL"
}
</code></pre>
</div>

<p>代码2</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/heL*?/i';
$str = 'heLLLLLLLLLLLLLLLL';

if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";
结果2:
array(1) {
[0] =&gt;
string(2) "he"
}
</code></pre>
</div>

<p>代码3,使用“+”</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/heL+?/i';

$str = 'heLLLLLLLLLLLLLLLL';
if(preg_match($regex, $str, $matches)){
var_dump($matches);
}
echo "\n";

结果3
array(1) {

[0] =
string(3) "heL"
}
</code></pre>
</div>

<p>代码4,使用{3,5}</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/heL{3,10}?/i';
$str = 'heLLLLLLLLLLLLLLLL';

if(preg_match($regex, $str, $matches)){
var_dump($matches);
}

echo "\n";
结果4
array(1) {
[0] =&gt;
string(5) "heLLL"
}
</code></pre>
</div>

<p><strong>六、正则表达式的注释</strong></p>

<p>格式:(?# 注释内容)
用途:主要用于复杂的注释</p>

<p>贡献代码:是一个用于连接MYSQL数据库的正则表达式</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$regex = '/
^host=(?&lt;!\.)([\d.]+)(?!\.) (?#主机地址)
\|
([\w!@#$%^&amp;*()_+\-]+) (?#用户名)
\|
([\w!@#$%^&amp;*()_+\-]+) (?#密码)
(?!\|)$/ix';

$str = 'host=192.168.10.221|root|123456';
$matches = array();

if(preg_match($regex, $str, $matches)){
var_dump($matches);
}

echo "\n";
</code></pre>
</div>

<p><strong>七、特殊字符</strong></p>

<table>
  <thead>
    <tr>
      <th>特殊字符  </th>
      <th style="text-align: left">   解释</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>*       </td>
      <td style="text-align: left">           0到多次</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>+        </td>
      <td style="text-align: left">         1到多次还可以写成{1,}</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>?    </td>
      <td style="text-align: left">             0或1次</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>.    </td>
      <td style="text-align: left">              匹配除换行符外的所有单个的字符</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>\w    </td>
      <td style="text-align: left">           [a-zA-Z0-9_]</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>\s    </td>
      <td style="text-align: left">            空白字符(空格，换行符，回车符）[\t\n\r]</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>\d    </td>
      <td style="text-align: left">            [0-9]</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>本篇文章为转载文章，因为觉得写得的确是好，二次分享给大家，版权归原作者“川山甲”所有。<br />
原文链接：http://www.cnblogs.com/baochuan/archive/2012/03/12/2391135.html</p>
</blockquote>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
          <a href="/2016/08/26/xrebel-tutorial/">
            XRebel入门与实践
            <small>23 Aug 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/22/easy-chosing-opensource-license/">
            如何快速选择开源软件协议
            <small>22 Jul 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/22/resolve-the-fastjson-problems-about-date/">
            解决fastjson反序列化日期0000-00-00失败的方案
            <small>22 Jul 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/06/what-is-architecture/">
            什么是架构
            <small>06 Jul 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/02/talk-about-middleman/">
            说说使用middleman的那些事情
            <small>02 Jul 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/01/how-to-make-a-project-plan/">
            学习笔记：项目管理之规划项目
            <small>30 Jun 2016</small>
          </a>
      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//aboutcoder.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>

  </body>

  <div style="display:none;">
	<script src="http://s23.cnzz.com/z_stat.php?id=1252898702&web_id=1252898702" language="JavaScript"></script>
</div>
  
</html>
