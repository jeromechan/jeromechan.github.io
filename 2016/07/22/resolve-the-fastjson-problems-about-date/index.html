<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      解决fastjson反序列化日期0000-00-00失败的方案 &middot; Jerome Chan
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/poole.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-precomposed.png">
                                 <link rel="shortcut icon" href="/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-08 layout-reverse">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Jerome Chan
        </a>
      </h1>
      <p class="lead">Hello, I&acutem a web developer at Tuniu Corp. Follow my <a href='https://github.com/jeromechan' target='_blank'>GitHub</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>
<!-- 
      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About Me</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/pages/bibliography.html">读过的书目</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/categories/">Categories</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/slides/">Slides</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/tags/">Tags</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/timeline/">Timeline</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
       -->

      <a class="sidebar-nav-item" href="/about/">About Me</a>
      <a class="sidebar-nav-item" href="/bibliography/" target="_blank">Bibliography</a>
      <a class="sidebar-nav-item" href="/slides/">Slides</a>
      <a class="sidebar-nav-item" href="/tags/">Tags</a>
      <a class="sidebar-nav-item" href="/categories/">Category</a>
      <a class="sidebar-nav-item" href="/timeline/">Timeline</a>
      <!-- <a class="sidebar-nav-item" href="https://github.com/jeromechan">GitHub</a> -->
      <!-- <span class="sidebar-nav-item">Currently v2.1.0-u-jeromechan-01</span> -->
    </nav>

    <p><small>Copyright &copy; 2013-2016</small></p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">解决fastjson反序列化日期0000-00-00失败的方案</h1>
  <span class="post-date">22 Jul 2016</span>
  <h4 id="section">一、案例场景复原</h4>
<p>示例场景里涉及两个class：<code class="highlighter-rouge">TestDemo.java</code>, <code class="highlighter-rouge">DateBeanDemo.java</code>。</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// DateBeanDemo.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DateBeanDemo</span> <span class="o">{</span>
	<span class="cm">/**
	 * dateStr field with Date.class
	 */</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">dateStr</span><span class="o">;</span>

    <span class="cm">/**
     * Get dateStr &lt;br&gt;
     *
     * @return Returns the dateStr. &lt;br&gt;
     */</span>
    <span class="kd">public</span> <span class="n">Date</span> <span class="nf">getDateStr</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">dateStr</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Set dateStr &lt;br&gt;
     *
     * @param dateStr The dateStr to set. &lt;br&gt;
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDateStr</span><span class="o">(</span><span class="n">Date</span> <span class="n">dateStr</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dateStr</span> <span class="o">=</span> <span class="n">dateStr</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// 示例执行例子</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">jsonStr</span> <span class="o">=</span> <span class="s">"{\"dateStr\":\"0000-00-00\"}"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DateBeanDemo</span> <span class="n">resultObject</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="na">parseObject</span><span class="o">(</span><span class="n">TestDemo</span><span class="o">.</span><span class="na">jsonStr</span><span class="o">,</span> <span class="n">DateBeanDemo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>执行以上的main方法之后，并没有获取预期的结果，而是在fastjson的序列化解析中便发生了异常，如下</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Exception in thread "main" com.alibaba.fastjson.JSONException: For input string: "0000-00-00"
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseObject(DefaultJSONParser.java:555)
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:251)
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:227)
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:186)
	at excel.TestDemo.main(TestDemo.java:23)
Caused by: java.lang.NumberFormatException: For input string: "0000-00-00"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
	at java.lang.Long.parseLong(Long.java:419)
	at java.lang.Long.parseLong(Long.java:468)
	at com.alibaba.fastjson.parser.deserializer.DateDeserializer.cast(DateDeserializer.java:56)
	at com.alibaba.fastjson.parser.deserializer.AbstractDateDeserializer.deserialze(AbstractDateDeserializer.java:98)
	at Fastjson_ASM_DateBeanDemo_1.deserialze(Unknown Source)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseObject(DefaultJSONParser.java:551)
	... 4 more
</code></pre>
</div>

<p>通过百度查阅了部分网上撰写的方案，可以使用fastjson中的注解<code class="highlighter-rouge">@JSONField(format="")</code>来重新定义<code class="highlighter-rouge">DateBeanDemo.dateStr</code>，如下：</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@JSONField</span><span class="o">(</span><span class="n">format</span> <span class="o">=</span> <span class="s">"yyyy-MM-dd"</span><span class="o">,</span><span class="n">parseFeatures</span><span class="o">={</span><span class="n">Feature</span><span class="o">.</span><span class="na">AllowISO8601DateFormat</span><span class="o">})</span>
<span class="kd">private</span> <span class="n">Date</span> <span class="n">dateStr</span><span class="o">;</span>
</code></pre>
</div>

<p>然而，并没有解决这个exception的问题。同时还怀疑了注解是否在反序列化之时没有被使用到，经过查阅源码，fastjson已将其反序列化的开关定义了<code class="highlighter-rouge">true</code>。</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Target</span><span class="o">({</span><span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">,</span> <span class="n">ElementType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">,</span> <span class="n">ElementType</span><span class="o">.</span><span class="na">PARAMETER</span><span class="o">})</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="n">JSONField</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">ordinal</span><span class="o">()</span> <span class="k">default</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>
    <span class="n">String</span> <span class="nf">format</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="nf">serialize</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="nf">deserialize</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// 默认定义了true，反序列化之时也使用该注解</span>
    <span class="n">SerializerFeature</span><span class="o">[]</span> <span class="nf">serialzeFeatures</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>
    <span class="n">Feature</span><span class="o">[]</span> <span class="nf">parseFeatures</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>
    <span class="n">String</span> <span class="nf">label</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<h4 id="section-1">二、原因剖析</h4>

<p>经查找fastjson中相关代码发现，当代码执行到<code class="highlighter-rouge">com.alibaba.fastjson.parser.deserializer.DateDeserializer.class</code>的执行方法<code class="highlighter-rouge">cast()</code>中之时，所使用的JSONParser中所含带的dateFormat依旧是默认的<code class="highlighter-rouge">yyyy-MM-dd HH:mm:ss</code>，而并非注解@JSONField中所定义的<code class="highlighter-rouge">yyyy-MM-dd</code>。
所以发生了转换字段失败。</p>

<p><img src="/images/2016-07-22-resolve-the-fastjson-problems-about-date/14691655278897.jpg" alt="" /></p>

<p>再深究一层，为什么不是@JSONField中所定义的<code class="highlighter-rouge">yyyy-MM-dd</code>作为JSONParser中的dateFormat呢？其实仔细阅读一遍<code class="highlighter-rouge">cast()</code>代码逻辑就会发现，并不是fastjson丢弃了JSONField的扫描，而是在方法中有这么一段：</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// 检查格式是否符合ISO8601的DateFormat规范</span>
<span class="k">if</span><span class="o">(!</span><span class="n">dateLexer</span><span class="o">.</span><span class="na">scanISO8601DateIfMatch</span><span class="o">(</span><span class="kc">false</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">break</span> <span class="n">label122</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<p>当执行到以上代码段之时，由于字符串<code class="highlighter-rouge">0000-00-00</code>并不是ISO8601的DateFormat规范之内，故而代码便会<code class="highlighter-rouge">break label122</code>执行跳出逻辑。紧接着执行的就是<code class="highlighter-rouge">DateFormat dateFormat1 = parser.getDateFormat();</code>，此时，parser依然是global定义的parser，DateFormat并没有使用<code class="highlighter-rouge">@JSONField</code>中所定义的。</p>

<h4 id="date">三、解决方案：新增date反序列化解析器</h4>

<p>解决方案并非只有一种，在众多解决方案中自己选择了”新增date反序列化解析器”的办法。除此之外还有诸如设置<code class="highlighter-rouge">JSON.DEFFAULT_DATE_FORMAT</code>属性的办法，也同样可以解决这一问题。下面作两种办法的对比和阐述。</p>

<ul>
  <li>方案1：设置属性<code class="highlighter-rouge">JSON.DEFFAULT_DATE_FORMAT</code></li>
</ul>

<p>这一方案只涉及修改<code class="highlighter-rouge">main()</code>方法代码即可实现，</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// 示例执行例子</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">jsonStr</span> <span class="o">=</span> <span class="s">"{\"dateStr\":\"0000-00-00\"}"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">JSON</span><span class="o">.</span><span class="na">DEFFAULT_DATE_FORMAT</span> <span class="o">=</span> <span class="s">"yyyy-MM-dd"</span><span class="o">;</span>
        <span class="n">DateBeanDemo</span> <span class="n">resultObject</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="na">parseObject</span><span class="o">(</span><span class="n">TestDemo</span><span class="o">.</span><span class="na">jsonStr</span><span class="o">,</span> <span class="n">DateBeanDemo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>但是翻阅fastjson中对于<code class="highlighter-rouge">JSON.DEFFAULT_DATE_FORMAT</code>可知，该属性属于静态属性，一旦设置影响全局。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>// com.alibaba.fastjson.JSON.class
public abstract class JSON implements JSONStreamAware, JSONAware {
    public static String DEFFAULT_DATE_FORMAT;
    // ...
</code></pre>
</div>

<ul>
  <li>方案2：新增date反序列化解析器</li>
</ul>

<p>主要思路是以fastjson原生的<code class="highlighter-rouge">DateDeserializer.class</code>为基础，定制化一个可以解析<code class="highlighter-rouge">0000-00-00</code>的日期反序列化解析器。<br />
该方式是fastjson函数<code class="highlighter-rouge">JSON.parseObject()</code>的一个应用场景，通过定制化<code class="highlighter-rouge">ParserConfig</code>参数，达到局部改变JSON解析逻辑的目的。<br />
如下：</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">jeromechan</span><span class="o">.</span><span class="na">fixbug</span><span class="o">.</span><span class="na">fastjson</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.alibaba.fastjson.parser.DefaultJSONParser</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.alibaba.fastjson.parser.deserializer.DateDeserializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Type</span><span class="o">;</span>

<span class="cm">/**
 * Copyright © 2016 Jerome Chan. All rights reserved.
 * An extended DateDeseializer for parsing '0000-00-00'.
 * 
 * @author chenjinlong
 * @CreateDate 7/20/16 5:55 PM
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JCDateDeserializer</span> <span class="kd">extends</span> <span class="n">DateDeserializer</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">JCDateDeserializer</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JCDateDeserializer</span><span class="o">();</span>

    <span class="kd">public</span> <span class="nf">JCDateDeserializer</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">cast</span><span class="o">(</span><span class="n">DefaultJSONParser</span> <span class="n">parser</span><span class="o">,</span> <span class="n">Type</span> <span class="n">clazz</span><span class="o">,</span> <span class="n">Object</span> <span class="n">fieldName</span><span class="o">,</span> <span class="n">Object</span> <span class="n">val</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">val</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">val</span> <span class="k">instanceof</span> <span class="n">String</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">strVal</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">val</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">strVal</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">strVal</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"0000-00-00"</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">parser</span><span class="o">.</span><span class="na">setDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">cast</span><span class="o">(</span><span class="n">parser</span><span class="o">,</span> <span class="n">clazz</span><span class="o">,</span> <span class="n">fieldName</span><span class="o">,</span> <span class="n">val</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// 示例执行例子</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">jsonStr</span> <span class="o">=</span> <span class="s">"{\"dateStr\":\"0000-00-00\"}"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>        
        <span class="n">ParserConfig</span> <span class="n">jcParserConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParserConfig</span><span class="o">();</span>
        <span class="n">jcParserConfig</span><span class="o">.</span><span class="na">putDeserializer</span><span class="o">(</span><span class="n">Date</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">JCDateDeserializer</span><span class="o">.</span><span class="na">instance</span><span class="o">);</span>
        <span class="n">DateBeanDemo</span> <span class="n">resultObject</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="na">parseObject</span><span class="o">(</span><span class="n">TestDemo</span><span class="o">.</span><span class="na">jsonStr</span><span class="o">,</span> <span class="n">DateBeanDemo</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">jcParserConfig</span><span class="o">,</span> <span class="n">JSON</span><span class="o">.</span><span class="na">DEFAULT_PARSER_FEATURE</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>假设觉得这种解析办法可以作为整个项目内的全局特性，感兴趣的话可以将定制好的<code class="highlighter-rouge">JCDateDeserializer</code>利用spring框架注入到项目容器中。这同样是对于方案2很不错的延伸。</p>

<h4 id="section-2">四、参考资料</h4>
<ul>
  <li>fastjson在github上的issues：<a href="https://github.com/alibaba/fastjson/issues/414">https://github.com/alibaba/fastjson/issues/414</a></li>
</ul>


</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
          <a href="/2016/09/01/integrate-phpstorm-mamp-xdebug/">
            关于PhpStorm+MAMP+xdebug集成失败的处理办法
            <small>01 Sep 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/08/27/git-protocol/">
            Git使用规范
            <small>27 Aug 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/08/26/xrebel-tutorial/">
            XRebel入门与实践
            <small>26 Aug 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/22/easy-chosing-opensource-license/">
            如何快速选择开源软件协议
            <small>22 Jul 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/06/what-is-architecture/">
            什么是架构
            <small>06 Jul 2016</small>
          </a>
      </li>
    
      <li>
          <a href="/2016/07/02/talk-about-middleman/">
            说说使用middleman的那些事情
            <small>02 Jul 2016</small>
          </a>
      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//aboutcoder.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>

  </body>

  <div style="display:none;">
	<script src="http://s23.cnzz.com/z_stat.php?id=1252898702&web_id=1252898702" language="JavaScript"></script>
</div>
  
</html>
